<!doctype html>
<html lang="es">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q994YVT2V2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-Q994YVT2V2');
</script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SINTRASPAP - Sindicato Nacional de Trabajadores de la Seguridad Privada y Afines del Paraguay</title>
<meta name="description" content="Sindicato Nacional de Trabajadores de la Seguridad Privada y Afines del Paraguay" />
<!-- Favicon -->
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="icon" href="favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="favicon-16x16.png" sizes="16x16" type="image/png">

<!-- Open Graph para redes sociales (EST√ÅTICOS - NO se modifican con JS) -->
<meta property="og:title" content="SINTRASPAP - Sindicato de Seguridad Privada del Paraguay">
<meta property="og:description" content="Defendemos los derechos de los trabajadores de seguridad privada. Ofertas laborales, leyes, directorio de empresas y m√°s.">
<meta property="og:image" content="https://sintraspap.github.io/images/uploads/imputan1.jpg">
<meta property="og:url" content="https://sintraspap.github.io">
<meta property="og:type" content="website">
<meta property="og:site_name" content="SINTRASPAP">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="SINTRASPAP - Sindicato de Seguridad Privada del Paraguay">
<meta name="twitter:description" content="Defendemos los derechos de los trabajadores de seguridad privada">
<meta name="twitter:image" content="https://sintraspap.github.io/images/uploads/imputan1.jpg">
<meta name="twitter:site" content="@sintraspap_py">

<style>
  :root{ --azul:#0b2a59; --azul-hover:#1e4f9a; --borde:#e5e7eb; --gris:#666; }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;width:100%;overflow-x:hidden;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#fff;color:#111}
  a{text-decoration:none;color:inherit}
  .container{max-width:1100px;margin:0 auto;padding:0 16px}

  /* Header */
  header{background:var(--azul);color:#fff;position:sticky;top:0;z-index:50}
  .head{display:flex;align-items:center;justify-content:space-between;padding:20px 0}
  .brand{display:flex;align-items:center;gap:14px;font-weight:900;font-size:34px}
  .brand img{height:64px;width:auto;display:inline-block}
  .menu{list-style:none;display:flex;gap:18px;margin:0;padding:0;flex-wrap:wrap}
  .menu a{color:#fff;padding:8px 10px;border-radius:6px}
  .menu a.active,.menu a:hover{background:var(--azul-hover)}
  .burger{display:none;margin-left:12px;background:transparent;border:1px solid rgba(255,255,255,.5);color:#fff;border-radius:6px;padding:8px 10px}
  @media(max-width:820px){
    .head{flex-wrap:wrap;gap:8px}
    .burger{display:block}
    nav{width:100%}
    .menu{display:none;width:100%;border-top:1px solid rgba(255,255,255,.25);padding-top:8px}
    .menu.show{display:flex;flex-direction:column}
  }

  /* Secciones */
  main{padding:24px 0 40px}
  section{display:none;animation:fade .15s ease-in}
  section.active{display:block}
  @keyframes fade{from{opacity:.4;transform:translateY(3px)}to{opacity:1;transform:none}}
  h1{font-size:clamp(22px,4vw,30px);margin:0 0 8px}
  h2{font-size:clamp(18px,3vw,22px);margin:14px 0 8px}
  p{line-height:1.6;margin:0 0 12px;color:#222}
  .muted{color:#777}

  /* Cards/noticias */
  .cards{display:grid;gap:16px;grid-template-columns:1fr}
  @media(min-width:760px){ .cards{grid-template-columns:1fr 1fr} }
  .card{border:1px solid var(--borde);border-radius:12px;padding:14px;background:#fff}
  .card img{max-width:100%;border-radius:8px;margin-bottom:10px;display:block}

/* Bloque AUSPCIANTES (Inicio) */
.sponsor-grid{
  display:grid;
  gap:12px;
  grid-template-columns:1fr;   /* por defecto: 1 columna en celu */
  width:100%;
}
@media (min-width:720px){
  .sponsor-grid{
    grid-template-columns:1fr 1fr; /* en PC ‚Üí 2 columnas */
  }
}

.sponsor-item{
  border:1px solid var(--borde);
  background:#fff;
  border-radius:12px;
  padding:12px;
  text-align:center;
}

.sponsor-item img,
.sponsor-item video{
  width:100%;
  max-width:260px;   /* tama√±o m√°ximo del banner */
  margin:0 auto;
  display:block;
  border-radius:10px;
}

  /* Tablas y buscador */
  .buscador{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}
  .input{flex:1 1 280px;border:1px solid var(--borde);border-radius:8px;padding:10px 12px;font:inherit}
  .tabla{border:1px solid var(--borde);border-radius:12px;overflow-x:auto;background:#fff}
  table{width:100%;border-collapse:collapse;min-width:620px}
  th,td{padding:10px;border-bottom:1px solid var(--borde);text-align:left}
  th{background:#f8fafc}
  tr:hover td{background:#fafafa}

  /* Footer */
  footer{background:#091f40;color:#fff;margin-top:16px}
  .foot{display:grid;gap:18px;grid-template-columns:1fr; padding:22px 0}
  @media(min-width:760px){ .foot{grid-template-columns:1.2fr 1fr} }
  .flogo{height:72px;width:auto;margin-bottom:10px}
  .afiliados p{font-size:22px;margin:0 0 10px;text-align:center;font-weight:bold}
  .afil-logos{display:flex;justify-content:center;align-items:center;gap:32px;flex-wrap:wrap;margin-top:10px}
  .afil-logos img{height:96px;width:auto;max-width:260px;background:#fff;border-radius:10px;padding:6px}
  .cpy{border-top:1px solid rgba(255,255,255,.2);text-align:center;padding:10px 0;color:#dcdcdc;font-size:14px}

  /* Utilidades */
  .sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  /* Forzar colores claros dentro del footer */
footer, 
footer p,
footer li,
footer a,
footer h3 {
  color: #fff !important;
}

footer a {
  text-decoration: underline;
}

footer .muted {
  color: #e6e6e6 !important;
}
 /* Espaciado extra para las Leyes */
#leyes ul li {
  margin-bottom: 20px;  /* m√°s separaci√≥n entre √≠tems */
  line-height: 1.8;     /* aumenta la altura de l√≠nea del texto */
}
/* --- √çconos de redes en el header --- */
.social-icons{
  display: flex;
  gap: 12px;
}

.social-icons a{
  font-size: 18px;
  color: #fff;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255,255,255,.15);
  border: 1px solid rgba(255,255,255,.25);
  transition: background 0.2s, transform 0.2s;
}

.social-icons a:hover{
  background: rgba(255,255,255,.3);
  transform: translateY(-2px);
}
/* En pantallas chicas que se centre */
@media(max-width:820px){
  .social-icons{
    width: 100%;
    justify-content: center;
    margin-top: 6px;
  }
}
/* OCULTAR el bloque de auspiciantes (sin dejar hueco) */
.sponsor-grid {
  display: none !important;
}
/* Ajustes del header (seguro y v√°lido) */
.head { align-items: center; justify-content: space-between; }
/* Si ya no us√°s √≠conos en el header, pod√©s borrar esta siguiente l√≠nea */
.social-icons { margin-left: 12px; }
/* Iconos de redes en el footer */
.footer-social{
  display:flex;
  gap:18px;
  justify-content:center;
  margin:16px 0 8px;   /* arriba y un poco antes del copyright */
}
.footer-social a{
  color:#fff;
  font-size:26px;      /* icono grande */
  width:52px;
  height:52px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.25);
  transition:background .15s, transform .15s, opacity .15s;
}
.footer-social a:hover{
  background:rgba(255,255,255,.22);
  transform:translateY(-2px);
}
@media (max-width:820px){
  .footer-social{ gap:16px; }
  .footer-social a{ width:56px; height:56px; font-size:28px; } /* un pel√≠n m√°s grandes en m√≥vil */
}

/* Mejoras de accesibilidad */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--azul);
  color: white;
  padding: 8px;
  z-index: 100;
  transition: top 0.3s;
}
.skip-link:focus {
  top: 0;
}

/* Mejora para el bot√≥n de men√∫ en m√≥viles */
.burger {
  cursor: pointer;
}
.burger:focus {
  outline: 2px solid white;
  outline-offset: 2px;
}

/* Mejora para las tarjetas de noticias */
.card {
  transition: transform 0.2s, box-shadow 0.2s;
}
.card:focus-within, .card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<!-- Enlace para saltar navegaci√≥n (accesibilidad) -->
<a href="#main-content" class="skip-link">Saltar al contenido principal</a>

<header>
  <div class="container head">
    <div class="brand">
      <img src="logo-sintraspap.png" alt="Logo SINTRASPAP" onerror="this.style.display='none'">
      <span>SINTRASPAP</span>
    </div>
    <button class="burger" aria-label="Abrir men√∫" aria-expanded="false" onclick="document.querySelector('.menu').classList.toggle('show'); this.setAttribute('aria-expanded', document.querySelector('.menu').classList.contains('show'))">
      ‚ò∞ Men√∫
    </button>
    <nav aria-label="Navegaci√≥n principal">
      <ul class="menu" id="menu">
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="#institucional">Institucional</a></li>
        <li><a href="#ofertas">Ofertas laborales</a></li>
        <li><a href="#leyes">Leyes</a></li>
       <li><a href="#directorio">Empresas</a></li>
        <li><a href="#contacto">Contacto</a></li>
      </ul>
    </nav>
  </div>
</header>

<main id="main-content" class="container" role="main">

<!-- INICIO -->
<section id="inicio" class="active">

<!-- BANNER GRUPO WHATSAPP - Una sola l√≠nea -->
<div style="background: #25D366; color: white; padding: 10px 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-size: 0.9rem;">
  üì± <strong>√önete a nuestro grupo de WhatsApp:</strong> 
  <a href="https://chat.whatsapp.com/EOouzAXfu7y3qGDIFkU2bZ" 
     target="_blank" 
     rel="noopener"
     style="color: white; text-decoration: underline; font-weight: bold; margin-left: 5px;">
    250+ miembros - Unirse aqu√≠
  </a>
</div>

  <!-- ANUNCIOS DIN√ÅMICOS (CARRUSEL DE TEXTO) -->
  <div class="anuncio-dinamico" style="background: linear-gradient(135deg, #0b2a59 0%, #1e4f9a 100%); border-radius: 12px; padding: 20px; margin-bottom: 24px; text-align: center; box-shadow: 0 4px 12px rgba(11, 42, 89, 0.2);">
    <div id="carrusel-anuncios" style="min-height: 50px; display: flex; align-items: center; justify-content: center;">
      <p style="margin: 0; font-size: 18px; font-weight: 600; color: white;">
        üì¢ <a href="#ofertas" style="color: white; text-decoration: underline;">¬°Revisa las nuevas ofertas laborales!</a>
      </p>
    </div>
  </div>

  <!-- AUSPCIANTES ARRIBA -->
  <div class="sponsor-grid">
    <div class="sponsor-item">
      <img src="banner-1.png" alt="Auspiciante 1" onerror="this.style.display='none'">
      <a href="https://wa.me/595992644708" target="_blank" rel="noopener">Escribinos al WhatsApp</a>
    </div>
    <div class="sponsor-item">
      <img src="banner-2.png" alt="Auspiciante 2" onerror="this.style.display='none'">
      <a href="https://wa.me/595992644708" target="_blank" rel="noopener">Escribinos al WhatsApp</a>
    </div>
  </div>

  <!-- Noticias desde data/noticias.json -->
  <div id="news-from-json" class="cards"></div>
  
  <script>
// 1. FUNCI√ìN PARA ACTUALIZAR META TAGS DIN√ÅMICAMENTE (SOLO METAETIQUETAS, NO T√çTULO VISIBLE)
  
  // T√≠tulo fijo para la p√°gina - NO cambiar el t√≠tulo visible
  // Mantener para metaetiquetas (redes sociales) solamente
  const metaTitle = noticia.titulo ? `${noticia.titulo} - SINTRASPAP` : 'SINTRASPAP';
  
  // Actualizar meta tags OG
  const ogTitle = document.querySelector('meta[property="og:title"]');
  const ogDescription = document.querySelector('meta[property="og:description"]');
  const ogImage = document.querySelector('meta[property="og:image"]');
  const ogUrl = document.querySelector('meta[property="og:url"]');
  
  // Actualizar meta tags Twitter
  const twitterTitle = document.querySelector('meta[name="twitter:title"]');
  const twitterDescription = document.querySelector('meta[name="twitter:description"]');
  const twitterImage = document.querySelector('meta[name="twitter:image"]');
  
  // Solo actualizar metaetiquetas, no el t√≠tulo visible
  if (ogTitle) ogTitle.setAttribute('content', metaTitle);
  if (twitterTitle) twitterTitle.setAttribute('content', metaTitle);
  
  // Descripci√≥n (usar resumen o t√≠tulo si no hay resumen)
  const description = noticia.resumen || noticia.titulo || 'Sindicato Nacional de Trabajadores de la Seguridad Privada y Afines del Paraguay';
  if (ogDescription) ogDescription.setAttribute('content', description);
  if (twitterDescription) twitterDescription.setAttribute('content', description);
  
  // Imagen (usar imagen de la noticia o la portada por defecto)
  const imageUrl = noticia.imagen || 'https://sintraspap.github.io/portada.jpg';
  if (ogImage) ogImage.setAttribute('content', imageUrl);
  if (twitterImage) twitterImage.setAttribute('content', imageUrl);
  
  // URL actual (con par√°metro de noticia si existe)
  const currentUrl = window.location.href;
  if (ogUrl) ogUrl.setAttribute('content', currentUrl);
}

// 2. CARGAR NOTICIAS DESDE JSON
(async () => {
  try {
    const res = await fetch('data/noticias.json?v=' + Date.now(), { cache: 'no-store' });
    if (!res.ok) throw new Error('HTTP ' + res.status);

    const data = await res.json();
    const items = Array.isArray(data) ? data : (data.items || []);

    // Orden por fecha (m√°s nuevas primero)
    items.sort((a, b) => (b.fecha || '').localeCompare(a.fecha || ''));

    const cont = document.getElementById('news-from-json');
    if (!items.length) {
      cont.innerHTML = '<p class="muted">A√∫n no hay noticias.</p>';
      return;
    }

    // 3. VERIFICAR SI HAY UNA NOTICIA ESPEC√çFICA EN LA URL
    const urlParams = new URLSearchParams(window.location.search);
    const noticiaParam = urlParams.get('n');
    let noticiaSeleccionada = items[0]; // Por defecto la primera

    if (noticiaParam) {
      // Buscar la noticia por slug
      const found = items.find((item, index) => {
        const slug = (item.titulo || '')
          .toLowerCase()
          .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
          .replace(/[^a-z0-9\s-]/g, '')
          .trim().replace(/\s+/g, '-') || ('noticia-' + index);
        return slug === noticiaParam;
      });
      
      if (found) {
        noticiaSeleccionada = found;
        // Scroll suave a la noticia despu√©s de cargar
        setTimeout(() => {
          const element = document.querySelector(`[data-slug="${noticiaParam}"]`);
          if (element) element.scrollIntoView({ behavior: 'smooth' });
        }, 100);
      }
    }

    // 4. ACTUALIZAR META TAGS CON LA NOTICIA SELECCIONADA (SOLO METAETIQUETAS)
    actualizarMetaTags(noticiaSeleccionada);

    // 5. RENDERIZAR NOTICIAS
    cont.innerHTML = items.map((item, i) => {
      const slug = (item.titulo || '')
        .toLowerCase()
        .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-z0-9\s-]/g, '')
        .trim().replace(/\s+/g, '-') || ('noticia-' + i);

      const safeTitle = (item.titulo || '').replace(/"/g, '&quot;');
      const isActive = noticiaParam === slug;
      
      // Determinar si mostrar contenido completo o resumen
      const mostrarCompleto = isActive || !item.cuerpo;
      
      return `
        <article class="card" data-slug="${slug}" ${isActive ? 'style="border: 2px solid #0b2a59;"' : ''}>
          <h3>${item.titulo || ''}</h3>
          ${item.fecha ? `<p style="margin-top:0; margin-bottom:12px;"><small><strong>${item.fecha}</strong></small></p>` : ''}
          ${item.imagen ? `<img src="${item.imagen}" alt="${safeTitle}" style="max-height:300px;object-fit:cover; margin-bottom:12px;">` : ''}
          
          ${item.resumen ? `<p class="muted" style="font-style: italic;">${item.resumen}</p>` : ''}
          
          ${item.cuerpo ? `
            <div class="contenido-noticia" style="${mostrarCompleto ? '' : 'display: none;'} margin-top:12px;">
              ${item.cuerpo}
            </div>
          ` : ''}
          
          ${item.cuerpo ? `
            <div style="margin-top:12px;">
              <button class="btn-toggle-leer" data-slug="${slug}" data-expandido="${mostrarCompleto}" 
                      style="background:#0b2a59;color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer">
                ${mostrarCompleto ? 'Leer menos' : 'Leer m√°s'}
              </button>
            </div>
          ` : ''}
          
          <div class="acciones" style="margin-top:20px">
            <button
              class="btn-compartir"
              style="background:#0b5ed7;color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer"
              data-title="${item.titulo || ''}"
              data-image="${item.imagen || ''}"
              data-url="${location.origin + location.pathname}?n=${slug}"
              aria-label="Compartir noticia: ${item.titulo || ''}"
            >
              Compartir
            </button>
          </div>
          
          <!-- Comentarios de Facebook (solo se muestran cuando la noticia est√° expandida) -->
          ${mostrarCompleto ? `
          <div class="fb-comments"
               data-href="${location.origin + location.pathname}?n=${slug}"
               data-width="100%"
               data-numposts="3"></div>
          ` : ''}
        </article>
      `;
    }).join('');

    // 6. EVENT LISTENER PARA BOTONES "LEER M√ÅS/LEER MENOS"
    document.querySelectorAll('.btn-toggle-leer').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const slug = e.currentTarget.dataset.slug;
        const expandido = e.currentTarget.dataset.expandido === 'true';
        const noticiaElement = document.querySelector(`[data-slug="${slug}"]`);
        const contenido = noticiaElement.querySelector('.contenido-noticia');
        const comentariosFB = noticiaElement.querySelector('.fb-comments');
        
        // Alternar visibilidad
        if (contenido) {
          if (expandido) {
            contenido.style.display = 'none';
            e.currentTarget.textContent = 'Leer m√°s';
            e.currentTarget.dataset.expandido = 'false';
            
            // Ocultar comentarios de Facebook
            if (comentariosFB) {
              comentariosFB.style.display = 'none';
            }
            
            // Limpiar par√°metro de URL si est√° presente
            if (window.location.search.includes(`n=${slug}`)) {
              const newUrl = window.location.origin + window.location.pathname;
              window.history.replaceState({}, document.title, newUrl);
            }
          } else {
            contenido.style.display = 'block';
            e.currentTarget.textContent = 'Leer menos';
            e.currentTarget.dataset.expandido = 'true';
            
            // Mostrar comentarios de Facebook
            if (comentariosFB) {
              comentariosFB.style.display = 'block';
              // Recargar comentarios de Facebook si es necesario
              if (typeof FB !== 'undefined') {
                FB.XFBML.parse();
              }
            }
            
            // Actualizar URL con par√°metro de noticia
            const newUrl = `${window.location.origin + window.location.pathname}?n=${slug}`;
            window.history.replaceState({}, document.title, newUrl);
            
            // Scroll suave a la noticia
            noticiaElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }
      });
    });

    // 7. EVENT LISTENER PARA BOTONES COMPARTIR
    document.querySelectorAll('.btn-compartir').forEach(btn => {
      btn.addEventListener('click', async (e) => {
        const title = e.currentTarget.dataset.title || document.title;
        const image = e.currentTarget.dataset.image || '';
        const url = e.currentTarget.dataset.url || location.href;
        
        // Encontrar la noticia correspondiente
        const itemIndex = items.findIndex(item => item.titulo === title);
        if (itemIndex !== -1) {
          actualizarMetaTags({
            ...items[itemIndex],
            imagen: image || items[itemIndex].imagen
          });
        }
        
        // Compartir
        try {
          if (navigator.share) {
            await navigator.share({ title, url });
          } else {
            await navigator.clipboard.writeText(url);
            alert('Enlace copiado ‚úî');
          }
        } catch (err) {
          console.log('Error al compartir:', err);
        }
      });
    });

  } catch (e) {
    console.error('Error cargando noticias:', e);
    document.getElementById('news-from-json').innerHTML =
      '<p class="muted">‚ö† No se pudo cargar noticias.</p>';
  }
})();

// CARRUSEL DE ANUNCIOS MEJORADO
const anuncios = [
  'üì¢ <a href="#ofertas" style="color: white; text-decoration: underline;">¬°Revisa las nuevas ofertas laborales en nuestra secci√≥n de empleos!</a>',
  'üîî <a href="https://wa.me/595992644708" style="color: white; text-decoration: underline;" target="_blank">¬øNecesitas asesoramiento legal? Cont√°ctanos por WhatsApp</a>',
  'üìã <a href="#leyes" style="color: white; text-decoration: underline;">Conoce tus derechos laborales en la secci√≥n de Leyes</a>',
  'üíº <a href="#directorio" style="color: white; text-decoration: underline;">Empresas de seguridad habilitadas - Ver directorio actualizado</a>',
  'üë• <a href="#contacto" style="color: white; text-decoration: underline;">¬°√önete a nuestro sindicato! Protegemos tus derechos laborales</a>'
];

let anuncioIndex = 0;
const contenedorAnuncios = document.getElementById('carrusel-anuncios');

function cambiarAnuncio() {
  if (!contenedorAnuncios) return;
  
  // Efecto de desvanecimiento
  contenedorAnuncios.style.opacity = '0';
  contenedorAnuncios.style.transition = 'opacity 0.5s ease';
  
  setTimeout(() => {
    anuncioIndex = (anuncioIndex + 1) % anuncios.length;
    contenedorAnuncios.innerHTML = `<p style="margin: 0; font-size: 18px; font-weight: 600; color: white;">${anuncios[anuncioIndex]}</p>`;
    
    // Restaurar opacidad
    setTimeout(() => {
      contenedorAnuncios.style.opacity = '1';
    }, 50);
  }, 500);
}

// Iniciar carrusel
if (contenedorAnuncios) {
  // Cambiar anuncio cada 5 segundos
  setInterval(cambiarAnuncio, 5000);
  
  // Pausar cuando el mouse est√° sobre el anuncio
  contenedorAnuncios.addEventListener('mouseenter', () => {
    clearInterval(window.anuncioInterval);
  });
  
  // Reanudar cuando el mouse sale
  contenedorAnuncios.addEventListener('mouseleave', () => {
    window.anuncioInterval = setInterval(cambiarAnuncio, 5000);
  });
  
  // Iniciar intervalo
  window.anuncioInterval = setInterval(cambiarAnuncio, 5000);
}
</script>

</section>

  <!-- INSTITUCIONAL -->
  <section id="institucional">
    <h1 class="sr-only">Institucional</h1>
  <p>
  Somos el <strong>Sindicato Nacional de Trabajadores de la Seguridad Privada y Afines del Paraguay (SINTRASPAP)</strong>, fundado el <strong>17 de marzo de 2024</strong> y reconocido por el Ministerio de Trabajo, Empleo y Seguridad Social con la <strong>Personer√≠a Gremial N.¬∫ 24/2024</strong>.
</p>

<p>
  Tenemos <strong>jurisdicci√≥n en todo el territorio nacional</strong> para representar a nuestros afiliados ante las patronales y autoridades del Estado. Defendemos el <strong>trabajo digno</strong>, promovemos la <strong>capacitaci√≥n constante</strong> y velamos por el <strong>cumplimiento de los derechos laborales</strong>, garantizando condiciones seguras y justas para toda la familia trabajadora de la seguridad privada.
</p>

    <h2>Autoridades</h2>
    <ul>
      <li><strong>Secretario General:</strong> Hugo Centuri√≥n Sanabria</li>
   <li style="list-style:none; margin-bottom:20px; text-align:center;">
  <img src="secretario-conflictos.jpg" 
       alt="Foto de Adriano Rub√©n D√≠az" 
       style="max-width:180px; border-radius:12px; display:block; margin:0 auto 10px;">
  <div><strong>Secretario de Conflictos</strong></div>
  <div>Adriano Rub√©n D√≠az</div>
</li>
    </ul>

    <h2>Misi√≥n</h2>
    <p>Velar por los derechos de los trabajadores de la seguridad privada, fomentar su capacitaci√≥n constante y garantizar entornos laborales seguros, dignos y justos.</p>

    <h2>Visi√≥n</h2>
    <p>Un sector formalizado, con empleo digno y condiciones justas para toda la familia trabajadora de seguridad privada.</p>
  </section>

  <!-- OFERTAS LABORALES -->
<section id="ofertas">
  <h1>Ofertas laborales</h1>

  <div class="formulario-container">
    <iframe 
      src="https://docs.google.com/forms/d/e/1FAIpQLScbLAuguiQZm0iGV8O0aS1yQ4kCEefWAs9dUqT_fJeC9yxw7A/viewform?embedded=true" 
      width="100%" 
      height="1200" 
      frameborder="0" 
      marginheight="0" 
      marginwidth="0"
      title="Formulario de ofertas laborales">
      Cargando‚Ä¶
    </iframe>
  </div>
</section>

<style>
  .formulario-container {
    max-width: 800px;     /* ancho m√°ximo en PC */
    margin: 0 auto;       /* centra el formulario */
    padding: 20px;        /* espacio alrededor */
    background: #fff;     /* fondo blanco */
    border: 1px solid #ddd; /* borde gris suave */
    border-radius: 10px;  /* bordes redondeados */
    box-shadow: 0 2px 8px rgba(0,0,0,.1); /* sombra ligera */
  }

  #ofertas h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #0b2a59; /* mismo azul de tu web */
  }
/* Ocultar "Leer m√°s" cuando el <details> est√° abierto */
details[open] > summary {
  display: none;
}
</style>

<!-- LEYES -->
<section id="leyes">
  <h2>Leyes</h2>
  <ul>
    <li>
      <a href="https://drive.google.com/file/d/1KLj6iDsZiBj187p_NJil_FHs2bOb0JIg/view?usp=drivesdk" target="_blank" rel="noopener">
        Ley N¬∞ 213/93 - C√≥digo del Trabajo (texto completo)
      </a>
    </li>
    <li>
      <a href="https://drive.google.com/file/d/1KQ7JWTEcD8BlFxodgfmVmEtRDLBz-zLG/view?usp=drivesdk" target="_blank" rel="noopener">
        Ley N¬∞ 5424/15 - Regulaci√≥n de empresas de seguridad privada
      </a>
    </li>
    <li>
      <a href="https://drive.google.com/file/d/1KNEsCUXIZTQB4-E6nE64leYpjZmOODt0/view?usp=drivesdk" target="_blank" rel="noopener">
        Resoluci√≥n N¬∞ 2/2016 - Reglamentaci√≥n de la Ley 5424/15 (Polic√≠a Nacional)
      </a>
    </li>
  </ul>
</section>

  <!-- DIRECTORIO -->
<section id="directorio">
  <h1>Empresas de seguridad habilitadas</h1>

  <!-- Buscador -->
  <div class="buscador">
    <input id="q" class="input" type="search" placeholder="Buscar (ID, empresa, resoluci√≥n, rubro)..." oninput="filtrarDirectorio()" aria-label="Buscar en el directorio de empresas" />
  </div>

  <!-- Tabla -->
  <div class="tabla">
    <table id="tabla-empresas">
      <thead>
        <tr>
          <th>ID</th>
          <th>Empresa</th>
          <th>Resoluci√≥n</th>
          <th>Fecha</th>
          <th>Rubro</th>
        </tr>
      </thead>
      <tbody>
    </tbody>
      </table>
    </div><!-- .tabla -->

    <p style="margin-top:16px; font-size:16px; color:#333; text-align:center;">
      <em>Datos oficiales del: 
        <a href="https://controleseguridad.com.py/index-quienes-somos.html"
           target="_blank" rel="noopener"
           style="color:#0b2a59; font-weight:bold;">
          controleseguridad.com.py
        </a>
      </em>
    </p>

    <!-- üîΩüîΩ PEGA AQU√ç EL TEXTO CRUDO COPIADO DE LA P√ÅGINA OFICIAL üîΩüîΩ -->
    <textarea id="emp-raw" style="display:none;"></textarea>
    <!-- üîºüîº NO BORRAR ESTE TEXTAREA, SOLO PEGAR ADENTRO üîºüîº -->
</section>

  <!-- CONTACTO -->
<section id="contacto">
  <h1>Contacto</h1>
  <p>üìû <a href="tel:+595992644708">+595 992 644 708</a></p>
  <p>‚úâ <a href="mailto:sintraspappy@gmail.com">sintraspappy@gmail.com</a></p>
  <p>üÖï <a href="https://www.facebook.com/share/16oD8u6Nu1/" target="_blank" rel="noopener">SINTRASPAP</a></p>
  <p>ùïè <a href="https://x.com/sintraspap_py?t=rRnZT7aWDZo1lA4R-m680g&s=09" target="_blank" rel="noopener">@sintraspap_py</a></p>
</section>

</main>

<footer>
  <div class="container foot">
    <div>
      <img src="logo-sintraspap.png" alt="Logo SINTRASPAP" class="flogo" onerror="this.style.display='none'">
      <h3>SINTRASPAP</h3>
      <p><strong>Sindicato Nacional de Trabajadores de la Seguridad Privada y Afines del Paraguay</strong></p>

      <!-- Afiliaciones (m√°s grande) -->
      <div class="afiliados">
        <p>Afiliado a:</p>
        <div class="afil-logos">
          <img src="logo-cnt.png" alt="Central Nacional de Trabajadores" onerror="this.style.display='none'">
          <img src="logo-citsp.png" alt="Confederaci√≥n Internacional de Trabajadores de la Seguridad Privada" onerror="this.style.display='none'">
        </div>
      </div>
    </div>

<div>
  <h3>Contacto</h3>
  <p>üìû <a href="tel:+595992644708">+595 992 644 708</a></p>
  <p>‚úâ <a href="mailto:sintraspappy@gmail.com">sintraspappy@gmail.com</a></p>
  <p>üÖï <a href="https://www.facebook.com/share/16oD8u6Nu1/" target="_blank" rel="noopener">SINTRASPAP</a></p>
  <p>ùïè <a href="https://x.com/sintraspap_py?t=rRnZT7aWDZo1lA4R-m680g&s=09" target="_blank" rel="noopener">@sintraspap_py</a></p>
</div>
  </div>
  <!-- √çconos de redes (footer) -->
<div class="footer-social">
  <a href="https://www.facebook.com/share/17MGniwXdL/" target="_blank" rel="noopener" aria-label="Facebook">
    <i class="fa-brands fa-facebook-f"></i>
  </a>
  <a href="https://x.com/sintraspap_py?t=xoAS-cRqgSr3BrY4azV4rQ&s=09" target="_blank" rel="noopener" aria-label="X (Twitter)">
    <i class="fa-brands fa-x-twitter"></i>
  </a>
  <a href="https://wa.me/595992644708" target="_blank" rel="noopener" aria-label="WhatsApp">
    <i class="fa-brands fa-whatsapp"></i>
  </a>
</div>
  <div class="cpy">¬© 2025 SINTRASPAP</div>
</footer>

<script>
// ---------- Navegaci√≥n por secciones ----------
const sections = Array.from(document.querySelectorAll('main section'));
const links = Array.from(document.querySelectorAll('#menu a'));

function showSection(id){
  if (!id || !document.querySelector(id)) id = '#inicio';
  sections.forEach(s => s.classList.toggle('active', ('#'+s.id) === id));
  links.forEach(a => a.classList.toggle('active', a.getAttribute('href') === id));
  document.querySelector('.menu')?.classList.remove('show');
}

function handleHash(){
  const h = location.hash || '#inicio';
  showSection(h);
}

window.addEventListener('hashchange', handleHash);
window.addEventListener('DOMContentLoaded', handleHash);

// ---------- Buscador (Empresas) ----------
function filtrarDirectorio(){
  const q = (document.getElementById('q')?.value || '').toLowerCase();
  document.querySelectorAll('#tabla-empresas tbody tr').forEach(tr=>{
    tr.style.display = tr.innerText.toLowerCase().includes(q) ? '' : 'none';
  });
}
window.filtrarDirectorio = filtrarDirectorio; // para el oninput del buscador

// ---------- Cargar empresas desde el <textarea> ----------
function cargarEmpresasDesdeTexto() {
  const raw = (document.getElementById('emp-raw')?.value || '').trim();
  if (!raw) return;

  const tbody = document.querySelector('#tabla-empresas tbody');
  if (!tbody) return;
  tbody.innerHTML = '';

  // Cada l√≠nea que empiece con ID (n√∫mero) la tomamos
  const lineas = raw.split('\n').map(l => l.trim()).filter(l => /^\d+\s+/.test(l));

  lineas.forEach(l => {
    // ID
    const mId = l.match(/^(\d+)\s+/);
    const id = mId ? mId[1] : '';

    // Fecha
    const mFecha = l.match(/(\d{4}-\d{2}-\d{2}|\d{2}\/\d{4}|\d{3}\/\d{4})/);
    const fecha = mFecha ? mFecha[1] : '';

    // Resoluci√≥n (antes de la fecha)
    let resolucion = '';
    if (mFecha) {
      const antesDeFecha = l.slice(0, mFecha.index).trim();
      const mRes = antesDeFecha.match(/(\d{1,4}(?:\/\d{2,4})?)\s*$/);
      if (mRes) resolucion = mRes[1];
    }

    // Nombre (entre ID y resoluci√≥n)
    let nombre = l;
    if (mId) nombre = nombre.slice(mId[0].length).trim();
    if (resolucion) {
      const idx = nombre.lastIndexOf(resolucion);
      if (idx > -1) nombre = nombre.slice(0, idx).trim();
    }
    nombre = nombre.replace(/\s{2,}/g, ' ').replace(/\s+-\s+/g, ' - ');

    // Rubro (despu√©s de la palabra Habilitado)
    let rubro = '';
    if (mFecha) {
  const despuesFecha = l.slice(mFecha.index + mFecha[0].length).trim();
const mR = despuesFecha.match(/Habilitado\s*(.*)/i);
if (mR) {
  rubro = mR[1]
    .split(';')                        // separa por ;
    .map(r => r.trim())                // limpia espacios
    .filter(r => r.length > 0)         // elimina vac√≠os
    .join(', ');                       // une con coma y espacio
} else {
  rubro = '';
}
}

    // Fila
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${id}</td>
      <td>${nombre}</td>
      <td>${resolucion}</td>
      <td>${fecha}</td>
      <td>${rubro}</td>
    `;
    tbody.appendChild(tr);
  });
}
function agregarEstadoYLimpiarRubros(){
  const table = document.getElementById('tabla-empresas');
  if (!table) return;

  // 1) Agregar <th> "Estado" antes de "Rubro" si no existe
  const headRow = table.tHead && table.tHead.rows[0];
  if (headRow) {
    const ths = Array.from(headRow.cells);
    const yaTieneEstado = ths.some(th => th.textContent.trim().toLowerCase() === 'estado');
    if (!yaTieneEstado) {
      const thRubro = ths.find(th => th.textContent.trim().toLowerCase() === 'rubro');
      const thEstado = document.createElement('th');
      thEstado.textContent = 'Estado';
      if (thRubro) headRow.insertBefore(thEstado, thRubro);
      else headRow.appendChild(thEstado);
    }
  }

  // 2) En cada fila, insertar <td>Habilitado antes del Rubro si no existe
  const tbody = table.tBodies[0];
  if (!tbody) return;

  Array.from(tbody.rows).forEach(tr => {
    const celdas = Array.from(tr.cells);
    const idxRubro = celdas.length - 1; // la √∫ltima celda es "Rubro"
    const yaTieneEstado = celdas.some(td => td.dataset && td.dataset.col === 'estado');

    if (!yaTieneEstado) {
      const tdEstado = document.createElement('td');
      tdEstado.textContent = 'Habilitado';
      tdEstado.dataset.col = 'estado';
      if (idxRubro >= 0) tr.insertBefore(tdEstado, celdas[idxRubro]);
      else tr.appendChild(tdEstado);
    }

    // 3) Limpiar el texto del "Rubro" (quitar ;;; y espacios)
    const rubroTd = tr.lastElementChild; // sigue siendo la √∫ltima porque insertamos antes
    if (rubroTd) {
      let txt = rubroTd.textContent || '';
      // quitar ; al inicio/fin y convertir ;;; a " , "
      txt = txt.replace(/^\s*;+|;+\s*$/g, '');
      txt = txt
        .split(';')
        .map(r => r.trim())
        .filter(Boolean)
        .join(', ');
      rubroTd.textContent = txt;
    }
  });
}
// Llamadas al cargar la p√°gina
window.addEventListener('DOMContentLoaded', cargarEmpresasDesdeTexto);
window.addEventListener('DOMContentLoaded', agregarEstadoYLimpiarRubros);
</script>

<script src="directorio.js"></script>
<div id="fb-root"></div>
<script async defer crossorigin="anonymous"
  src="https://connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v19.0"
  nonce="sintraspap"></script>
</body>
</html>